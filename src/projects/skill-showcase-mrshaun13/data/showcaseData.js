// Real telemetry data from existing Research Visualizer projects
// Used to power the showcase dashboard visualizations

export const skillMeta = {
  name: 'Research Visualizer',
  version: '6.3',
  author: 'mrshaun13',
  license: 'MIT',
  tagline: 'Deep Research → Interactive Dashboard Pipeline',
  description:
    'Takes a simple research topic from a user, autonomously discovers dimensions, metrics, subgroups, and taxonomies, then produces an interactive web dashboard.',
  repoUrl: 'https://github.com/mrshaun13/research-visualizer',
  hubRepoUrl: 'https://github.com/mrshaun13/personal-research-hub',
  libraryRepoUrl: 'https://github.com/mrshaun13/research-hub',
};

export const pipelinePhases = [
  {
    id: 'environment',
    number: 0,
    name: 'Environment Check',
    shortName: 'ENV',
    description: 'Detect or set up the Research Hub. Two-layer config: machine-local pointer + portable hub-config.json.',
    details: [
      'Check for pointer config at ~/.codeium/windsurf/skills/research-visualizer/config.json',
      'If found: read personalHubPath, git pull for sync, check dev server status',
      'If not found: first-time setup — scaffold hub or clone existing repo',
      'Library sync: pull latest community research for each configured library',
    ],
    color: '#6366f1',
  },
  {
    id: 'interpret',
    number: 1,
    name: 'Interpret',
    shortName: 'INT',
    description: 'Parse natural language into research parameters. Classify into research lenses.',
    details: [
      'Extract core topic, implied populations, time scope, research intent',
      'Classify lenses: Population, Behavior, Industry, Culture, Product/Purchase',
      'Product lens auto-detects from signals like "buy", "compare", brand mentions',
      'Most topics combine 2-3 lenses for multi-dimensional analysis',
    ],
    color: '#8b5cf6',
  },
  {
    id: 'survey',
    number: 2,
    name: 'Survey',
    shortName: 'SRV',
    description: 'Broad landscape scan. 3-5 searches to understand the research terrain.',
    details: [
      'Conduct broad searches: overview, major studies, trends, demographics',
      'Identify major datasets, commonly measured dimensions, known subgroups',
      'Determine temporal segmentation: inflection-point eras, policy eras, decades',
      'Choose the lens that reveals the most interesting story',
    ],
    color: '#a78bfa',
  },
  {
    id: 'discover',
    number: 3,
    name: 'Discover',
    shortName: 'DSC',
    description: 'Autonomous dimension discovery — subgroups, metrics, taxonomies, user checkpoint.',
    details: [
      'Subgroup discovery with >20% difference split test',
      'Core metric identification via Standard Research Dimensions Framework',
      'Taxonomy discovery: cross-reference 2-3 sources, rank by data availability',
      'User checkpoint: present Research Plan Summary for lightweight approval',
    ],
    color: '#c084fc',
  },
  {
    id: 'research',
    number: 4,
    name: 'Research',
    shortName: 'RSH',
    description: 'Deep data gathering for every cell in the dimension matrix.',
    details: [
      'For each metric × group × time period: search and extract statistics',
      'Tag every data point with quality tier (T1 Gold → T4 Estimate)',
      'Triangulate: 2-3 independent sources per data point when possible',
      'Track all sources in structured citation list',
    ],
    color: '#e879f9',
  },
  {
    id: 'analyze',
    number: 5,
    name: 'Analyze',
    shortName: 'ANL',
    description: 'Data-driven story & visualization selection — after seeing the data, not before.',
    details: [
      'Key findings: most surprising, biggest differences, clearest trends',
      'Auto-select visualizations using deterministic chart-type rules',
      'Organize by narrative flow: Broad → Deep → Compare → Explore → Context → Sources',
    ],
    color: '#f472b6',
  },
  {
    id: 'build',
    number: 6,
    name: 'Build',
    shortName: 'BLD',
    description: 'Build into Research Hub — never a standalone project. React + Recharts + Tailwind.',
    details: [
      'Generate slug, create project directory under hub src/projects/',
      'Write App.jsx with internal sidebar nav + section routing',
      'Write components/ (Overview, sections, Sources) and data/ files',
      'Update project registry (index.js) and hub-config.json',
    ],
    color: '#fb923c',
  },
  {
    id: 'present',
    number: 7,
    name: 'Present',
    shortName: 'PRS',
    description: 'Polish, validate, deliver. Build test, QA, telemetry, git sync, library share.',
    details: [
      'Build test: npx vite build — zero errors required',
      'QA: charts render, labels visible, tooltips correct, citations complete',
      'Finalize telemetry: compute ALL fields including content analysis and hours saved',
      'Git sync → library share (if public) → open browser preview',
    ],
    color: '#22c55e',
  },
];

export const projectShowcases = [
  {
    slug: 'traitors-s3-analytics',
    title: 'The Traitors S3 Analytics',
    subtitle: 'Spoiler-Free Game Intelligence Dashboard',
    category: 'Entertainment Analytics',
    screenshotFile: 'traitors.png',
    screenshotAlt: 'Season 3 game intelligence with player cards, vote accuracy stats, and episode-gated spoiler protection',
    highlights: [
      'Episode-gated spoiler system (Ep 1-11)',
      'Player profiles with social game scores',
      'Deception tracking & alliance maps',
      '23 contestants with full stats',
    ],
    lens: 'standard',
    accentColor: 'red',
    style: 'Data-rich entertainment analytics with interactive filtering',
    fkGrade: '8th-9th Grade',
    bloomsLabel: 'Analyze',
  },
  {
    slug: 'solar-system-explorer',
    title: 'Solar System Explorer',
    subtitle: 'Interactive Space Adventure for Kids',
    category: 'Educational / Kids',
    screenshotFile: 'solar-system.png',
    screenshotAlt: 'Space Lab with at-home experiments, constellation viewer instructions, and kid-friendly UI with progress tracking',
    highlights: [
      'Written at 3rd-4th grade reading level',
      'Interactive games: Wind Race, Gravity Calculator, Trivia',
      'At-home science experiments (Space Lab)',
      'Progress tracking with completion badges',
    ],
    lens: 'standard',
    accentColor: 'blue',
    style: 'Kid-friendly educational with gamification and hands-on activities',
    fkGrade: '3rd-4th Grade',
    bloomsLabel: 'Apply',
  },
  {
    slug: 'career-pivot-explorer',
    title: 'Career Pivot Explorer',
    subtitle: 'Personalized Career Guidance',
    category: 'Personal Decision Support',
    screenshotFile: 'career-pivot.png',
    screenshotAlt: 'Transferable skills radar chart comparing EA skills to career options, with skill match rankings and transfer maps',
    highlights: [
      'Personalized to user profile (age, location, experience)',
      'Radar chart: skill overlap across career options',
      'Skill Transfer Map: how each EA skill translates',
      '18 jobs across 4 stress tiers with salary data',
    ],
    lens: 'standard',
    accentColor: 'violet',
    style: 'Conversational guidance with data-driven personalization',
    fkGrade: '9th Grade',
    bloomsLabel: 'Evaluate',
  },
  {
    slug: 'chainsaw-comparison',
    title: 'Gas Chainsaw Comparison',
    subtitle: 'Product Comparison Dashboard',
    category: 'Product/Purchase Decision',
    screenshotFile: 'chainsaw.png',
    screenshotAlt: 'Husqvarna 455 Rancher product detail with full specs, purchase links, ratings, pros/cons, and use case fit bars',
    highlights: [
      'Full spec comparison across 12+ models',
      'Purchase links with live pricing from retailers',
      'Use Case Fit scoring (Storm Cleanup, Tree Felling, etc.)',
      'Pros/Cons from aggregated user reviews',
    ],
    lens: 'product',
    accentColor: 'amber',
    style: 'Product intelligence with purchase-ready detail pages',
    fkGrade: '10th Grade',
    bloomsLabel: 'Evaluate',
  },
  {
    slug: 'hub-home',
    title: 'Research Hub Home',
    subtitle: 'Centralized Research Manager',
    category: 'Hub Infrastructure',
    screenshotFile: 'hub-home.png',
    screenshotAlt: 'Research Hub home page showing 5 personal projects and 10 community library projects with aggregate telemetry stats',
    highlights: [
      'Personal Research + Public Library in one view',
      'Aggregate telemetry: hours saved, searches, charts, data points',
      'Lens badges, community badges, readability metrics per card',
      'Two-section sidebar with independent search',
    ],
    lens: null,
    accentColor: 'indigo',
    style: 'Unified project management with rich metadata cards',
    fkGrade: null,
    bloomsLabel: null,
  },
];

export const realProjectTelemetry = [
  {
    name: 'AI Tooling\nAdoption',
    shortName: 'AI Tooling',
    slug: 'ai-tooling-adoption',
    lens: 'standard',
    durationMinutes: 75,
    searchesPerformed: 12,
    sourcesCount: 15,
    sectionsBuilt: 7,
    chartsBuilt: 12,
    filesGenerated: 11,
    dataPointsCollected: 300,
    totalWords: 7377,
    fkGrade: 10.5,
    fkLabel: '11th Grade',
    bloomsLevel: 5,
    bloomsLabel: 'Evaluate',
    totalHoursSaved: 103.75,
    equivalentLabel: '~2.5 weeks',
    consumptionMinutes: 70,
    phaseTiming: { environment: 2, interpret: 3, survey: 10, discover: 10, research: 15, analyze: 5, build: 25, present: 5 },
  },
  {
    name: 'Pixel 9 Pro\nUpgrade',
    shortName: 'Pixel Upgrade',
    slug: 'pixel-upgrade-analysis',
    lens: 'product',
    durationMinutes: 44,
    searchesPerformed: 8,
    sourcesCount: 12,
    sectionsBuilt: 8,
    chartsBuilt: 4,
    filesGenerated: 12,
    dataPointsCollected: 264,
    totalWords: 4500,
    fkGrade: 10.1,
    fkLabel: '10th Grade',
    bloomsLevel: 5,
    bloomsLabel: 'Evaluate',
    totalHoursSaved: 82,
    equivalentLabel: '~2 weeks',
    consumptionMinutes: 37,
    phaseTiming: { environment: 15, interpret: 3, survey: 5, discover: 8, research: 10, analyze: 2, build: 20, present: 6 },
  },
  {
    name: 'Career Pivot\nExplorer',
    shortName: 'Career Pivot',
    slug: 'career-pivot-explorer',
    lens: 'standard',
    durationMinutes: 42,
    searchesPerformed: 15,
    sourcesCount: 15,
    sectionsBuilt: 7,
    chartsBuilt: 8,
    filesGenerated: 10,
    dataPointsCollected: 324,
    totalWords: 6200,
    fkGrade: 9.2,
    fkLabel: '9th Grade',
    bloomsLevel: 5,
    bloomsLabel: 'Evaluate',
    totalHoursSaved: 94,
    equivalentLabel: '~2.5 weeks',
    consumptionMinutes: 55,
    phaseTiming: { environment: 1, interpret: 2, survey: 8, discover: 6, research: 8, analyze: 3, build: 10, present: 4 },
  },
  {
    name: 'Solar System\nExplorer',
    shortName: 'Solar System',
    slug: 'solar-system-explorer',
    lens: 'standard',
    durationMinutes: 180,
    searchesPerformed: 5,
    sourcesCount: 8,
    sectionsBuilt: 14,
    chartsBuilt: 22,
    filesGenerated: 23,
    dataPointsCollected: 620,
    totalWords: 9200,
    fkGrade: 3.5,
    fkLabel: '3rd-4th Grade',
    bloomsLevel: 3,
    bloomsLabel: 'Apply',
    totalHoursSaved: 98,
    equivalentLabel: '~2.5 weeks',
    consumptionMinutes: 75,
    phaseTiming: { environment: 1, interpret: 1, survey: 2, discover: 1, research: 2, analyze: 1, build: 160, present: 12 },
  },
  {
    name: 'Traitors S3\nAnalytics',
    shortName: 'Traitors S3',
    slug: 'traitors-s3-analytics',
    lens: 'standard',
    durationMinutes: 102,
    searchesPerformed: 12,
    sourcesCount: 15,
    sectionsBuilt: 5,
    chartsBuilt: 7,
    filesGenerated: 8,
    dataPointsCollected: 450,
    totalWords: 8500,
    fkGrade: 8.5,
    fkLabel: '8th-9th Grade',
    bloomsLevel: 4,
    bloomsLabel: 'Analyze',
    totalHoursSaved: 110,
    equivalentLabel: '~3 weeks',
    consumptionMinutes: 90,
    phaseTiming: { environment: 1, interpret: 2, survey: 5, discover: 15, research: 30, analyze: 10, build: 30, present: 9 },
  },
];

export const aggregateStats = (() => {
  const t = realProjectTelemetry;
  return {
    totalProjects: t.length,
    totalHoursSaved: t.reduce((s, p) => s + p.totalHoursSaved, 0),
    totalBuildMinutes: t.reduce((s, p) => s + p.durationMinutes, 0),
    totalSearches: t.reduce((s, p) => s + p.searchesPerformed, 0),
    totalSources: t.reduce((s, p) => s + p.sourcesCount, 0),
    totalCharts: t.reduce((s, p) => s + p.chartsBuilt, 0),
    totalDataPoints: t.reduce((s, p) => s + p.dataPointsCollected, 0),
    totalWords: t.reduce((s, p) => s + p.totalWords, 0),
    totalFiles: t.reduce((s, p) => s + p.filesGenerated, 0),
    totalSections: t.reduce((s, p) => s + p.sectionsBuilt, 0),
    avgBuildMinutes: Math.round(t.reduce((s, p) => s + p.durationMinutes, 0) / t.length),
    avgHoursSaved: +(t.reduce((s, p) => s + p.totalHoursSaved, 0) / t.length).toFixed(1),
    fkRange: `${Math.min(...t.map(p => p.fkGrade)).toFixed(1)} – ${Math.max(...t.map(p => p.fkGrade)).toFixed(1)}`,
    bloomsRange: 'Apply → Evaluate',
  };
})();

export const scaffoldEvolution = [
  {
    stage: 'Skill Invocation',
    label: 'User Prompt',
    description: 'A single natural-language sentence triggers the entire pipeline.',
    example: '"I\'m looking to buy a chainsaw for property maintenance"',
    files: [],
    color: '#6366f1',
  },
  {
    stage: 'Phase 0',
    label: 'Hub Detection',
    description: 'The skill checks for an existing Research Hub. If found, it reads the config and syncs. If not, it scaffolds a complete hub application from templates.',
    example: null,
    files: ['config.json (pointer)', 'hub-config.json (portable)', '.local-config.json (machine)'],
    color: '#8b5cf6',
  },
  {
    stage: 'Phase 0B',
    label: 'Hub Scaffold',
    description: 'First-time only: creates the entire hub application from verbatim templates. Package.json, Vite config, Tailwind, App.jsx with two-section sidebar, HubHome with project cards.',
    example: null,
    files: ['package.json', 'vite.config.js', 'tailwind.config.js', 'index.html', 'src/App.jsx', 'src/components/HubHome.jsx', 'src/main.jsx', 'src/index.css'],
    color: '#a78bfa',
  },
  {
    stage: 'Phases 1-5',
    label: 'Research & Analysis',
    description: 'The agent interprets the topic, surveys the landscape, discovers dimensions, gathers data, and analyzes findings. No files are written yet — this is pure research.',
    example: 'PRODUCT TYPE: Gas Chainsaw\nLIFECYCLE: Durable\nTIERS: Homeowner, Farm & Ranch, Pro\nPRODUCTS: 12 models across 4 brands',
    files: [],
    color: '#e879f9',
  },
  {
    stage: 'Phase 6',
    label: 'Project Build',
    description: 'Research materializes into code. The agent creates the project directory, writes App.jsx with internal navigation, builds every component and data file, then registers the project.',
    example: null,
    files: ['src/projects/<slug>/App.jsx', 'src/projects/<slug>/components/*.jsx', 'src/projects/<slug>/data/*.js', 'src/projects/index.js (updated)'],
    color: '#fb923c',
  },
  {
    stage: 'Phase 7',
    label: 'Polish & Deliver',
    description: 'Build test, QA pass, telemetry computation, git sync, optional library share. The project is live in the hub.',
    example: null,
    files: ['hub-config.json (telemetry added)', 'src/projects/index.js (telemetry added)'],
    color: '#22c55e',
  },
];

export const telemetryFields = [
  { category: 'Timing', fields: ['runStartedAt', 'runCompletedAt', 'durationMinutes', 'phaseTiming (8 phases)'] },
  { category: 'Build Metrics', fields: ['searchesPerformed', 'sourcesCount', 'sectionsBuilt', 'chartsBuilt', 'filesGenerated', 'dataPointsCollected'] },
  { category: 'Content Analysis', fields: ['fleschKincaidGrade + label', 'bloomsLevel + label + range', 'totalWords', 'totalSentences', 'readabilityNote'] },
  { category: 'Hours Saved', fields: ['researchHours', 'productionHours (6 formats)', 'totalHoursSaved', 'equivalentLabel'] },
  { category: 'Consumption Time', fields: ['readingMinutes', 'chartExplorationMinutes', 'interactiveOverheadMinutes', 'estimatedLabel'] },
  { category: 'Context', fields: ['skillVersion', 'userPrompt', 'researchPlan', 'checkpointModified', 'model', 'includedSetup'] },
];

export const hoursSavedFormulas = [
  { name: 'Research Hours', formula: '(sources × 0.75) + (dataPoints × 0.02) + (searches × 0.25)' },
  { name: 'Interactive Dashboard', formula: '(sections × 6) + (charts × 3) + (files × 0.5)' },
  { name: 'White Paper', formula: '(sections × 4) + (sources × 0.5) + (dataPoints × 0.01)' },
  { name: 'Blog Post', formula: '(sections × 2.5) + (charts × 1)' },
  { name: 'Technical Doc', formula: '(sections × 3) + (sources × 0.3)' },
  { name: 'Presentation', formula: '(sections × 1.5) + (charts × 0.5)' },
  { name: 'GitHub Repo', formula: '(sections × 3) + (charts × 2) + (files × 0.5)' },
];

export const consumptionFormulas = [
  { name: 'Reading WPM', formula: 'FK grade > 12 ? 120 : 150' },
  { name: 'Reading Time', formula: 'totalWords / readingWPM' },
  { name: 'Chart Exploration', formula: 'chartsBuilt × 0.75 min' },
  { name: 'Interactive Overhead', formula: '(reading + charts) × 0.2' },
];

export const contributionFlow = {
  agentSteps: [
    { step: 1, action: 'Get branch HEAD', api: 'GET /repos/:owner/:repo/git/ref/heads/agent-contributions' },
    { step: 2, action: 'Read current index.js', api: 'GET /repos/:owner/:repo/contents/src/projects/index.js' },
    { step: 3, action: 'Create blobs', api: 'POST /repos/:owner/:repo/git/blobs (for each file)' },
    { step: 4, action: 'Create tree', api: 'POST /repos/:owner/:repo/git/trees' },
    { step: 5, action: 'Create commit', api: 'POST /repos/:owner/:repo/git/commits' },
    { step: 6, action: 'Update ref', api: 'PATCH /repos/:owner/:repo/git/refs/heads/agent-contributions' },
  ],
  serverSteps: [
    { step: 1, action: 'Detect new projects', detail: 'git diff against main to find new App.jsx files' },
    { step: 2, action: 'Validate structure', detail: 'Run validate-research-project.mjs — checks files, registry, telemetry, content quality' },
    { step: 3, action: 'Build test', detail: 'npm ci && vite build — must compile with zero errors' },
    { step: 4, action: 'Auto-merge or Issue', detail: 'All pass → merge to main via API. Any fail → create GitHub Issue with report' },
  ],
  securityLayers: [
    { layer: 'Contributor PAT', protection: 'Fine-grained, Contents:write only, scoped to single repo' },
    { layer: 'Branch Protection', protection: 'Repository ruleset blocks direct pushes to main' },
    { layer: 'Validation Script', protection: 'Lives on main — contributors cannot modify it' },
    { layer: 'ADMIN_PAT', protection: 'Repo secret, invisible to contributors, used only after validation passes' },
  ],
};

export const lensTypes = [
  { name: 'Standard Research', key: 'standard', color: '#3b82f6', description: 'General research with temporal trends, demographics, and comparative analysis' },
  { name: 'Product Compare', key: 'product', color: '#f59e0b', description: 'Product specs, pricing, TCO, recommendations with purchase links' },
  { name: 'Population', key: 'population', color: '#10b981', description: 'Demographics, health, economic, and social metrics across groups' },
  { name: 'Behavior', key: 'behavior', color: '#8b5cf6', description: 'Prevalence, taxonomy, and outcomes of behavioral patterns' },
  { name: 'Industry', key: 'industry', color: '#f43f5e', description: 'Market size, revenue, worker conditions, and competitive landscape' },
  { name: 'Culture', key: 'culture', color: '#06b6d4', description: 'Societal shifts, media trends, and public opinion over time' },
];
